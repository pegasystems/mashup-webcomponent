<!DOCTYPE html>
<html lang="en">

<head>
  <title>Pega GovUS</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, viewport-fit=cover" />
  <script src="./assets/js/uswds-init.min.js"></script>
  <link rel="stylesheet" href="./assets/css/uswds.min.css" />
  <link rel="stylesheet" href="./app.css" type="text/css">
</head>

<body>
  <a class="usa-skipnav" href="#main-content">Skip to main content</a>
  <header class="usa-header usa-header--extended usa-header-dark">
    <div class="usa-navbar">
      <div class="usa-logo" id="extended-logo">
        <em class="usa-logo__text">
          <img height="32" src="assets/img/logo-ssa.svg">
          <a style="margin-left:0.5rem" href="./ssa.html" title="HealthCare">
            Social Security
          </a>
        </em>
      </div>
      <button class="usa-menu-btn">Menu</button>
    </div>
    <nav aria-label="Primary navigation" class="usa-nav">
      <div class="usa-nav__inner">
        <button class="usa-nav__close">
          <img src="assets/img/close.svg" role="img" alt="Close">
        </button>
        <ul class="usa-nav__primary usa-accordion">
          <li class="usa-nav__primary-item">
            <button class="usa-accordion__button usa-nav__link usa-current" aria-expanded="false"
              aria-controls="extended-nav-section-one">
              <span>Benefits</span>
            </button>
            <ul id="extended-nav-section-one" class="usa-nav__submenu">
              <li class="usa-nav__submenu-item">
                <a href="#">Retirement</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Disability</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Medicare</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Survivors</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Supplemental Security Income</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Retirement Estimator</a>
              </li>
            </ul>
          </li>
          <li class="usa-nav__primary-item">
            <button class="usa-accordion__button usa-nav__link" aria-expanded="false"
              aria-controls="extended-nav-section-two">
              <span>Business & Government</span>
            </button>
            <ul id="extended-nav-section-two" class="usa-nav__submenu">
              <li class="usa-nav__submenu-item">
                <a href="#">Business Services</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Congress</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Data Exchange</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Electronic Records Expressrvivors</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Employers</a>
              </li>
              <li class="usa-nav__submenu-item">
                <a href="#">Financial Institutions</a>
              </li>
            </ul>
          </li>
          <li class="usa-nav__primary-item">
            <a href="javascript:void(0)" class="usa-nav__link">
              <span>Agency Information</span>
            </a>
          </li>
        </ul>
        <div class="usa-nav__secondary">
          <ul class="usa-nav__secondary-links">
            <li class="usa-nav__secondary-item">
              <a href="">Languages</a>
            </li>
            <li class="usa-nav__secondary-item">
              <a href="">Log out</a>
            </li>
          </ul>
          <form class="usa-search usa-search--small" role="search">
            <label class="usa-sr-only" for="extended-search-field-en-small">
              Search
            </label>
            <input class="usa-input" id="extended-search-field-en-small" type="search" name="search">
            <button class="usa-button" type="submit">
              <span class="usa-sr-only">Search</span>
            </button>
          </form>
        </div>
      </div>
    </nav>
  </header>
  <main>
  <div id="main-content">
    <section>
      <div class="grid-container">
        <p class="usa-intro">
          Click on the button below to request your benefit verification letter.
        </p>
        <a href="#" class="usa-button usa-button--big" onclick="startBenefitVerification(event);">Start</a>
      </div>
    </section>
    <section class='usa-section'>
      <div class="grid-container">
        <h2 class="font-heading-xl margin-y-0">My pending cases</h2>
        <div id='myworkist'></div>
      </div>
    </section>
    <section class="grid-container">
      <div class="grid-row grid-gap">
        <div class="tablet:grid-col-4">
          <h2 class="font-heading-xl margin-top-0 tablet:margin-bottom-0">Online Services</h2>
        </div>
        <div class="tablet:grid-col-8 usa-prose">
          <p>We are constantly expanding our online services to give you freedom and control when conducting business
            with Social Security. Today, you can apply for retirement, disability, and Medicare benefits online, check
            the status of an application or appeal, request a replacement Social Security card (in most areas), print a
            benefit verification letter, and more â€“ from anywhere and from any of your devices!</p>
          <p>Hours of Service: Monday - Friday 5 AM - 1 AM ET | Saturday 5 AM - 11 PM ET | Sunday 8 AM - 11:30 PM ET</p>
        </div>
      </div>
    </section>
  </div>
  </main>
  <footer class="usa-footer">
    <div class="grid-container usa-footer__return-to-top">
      <a href="#">Return to top</a>
    </div>
    <div class="usa-footer__primary-section">
      <nav class="usa-footer__nav" aria-label="Footer navigation">
        <ul class="grid-row grid-gap">
          <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
            <a class="usa-footer__primary-link" href="javascript:void(0);">
              Help
            </a>
          </li>
          <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
            <a class="usa-footer__primary-link" href="javascript:void(0);">
              About
            </a>
          </li>
          <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
            <a class="usa-footer__primary-link" href="javascript:void(0);">
              Contact Us
            </a>
          </li>
          <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
            <a class="usa-footer__primary-link" href="javascript:void(0);">
              Offices
            </a>
          </li>
        </ul>
      </nav>
    </div>

    <div class="usa-footer__secondary-section">
      <div class="grid-container">
        <div class="grid-row grid-gap">
          <div class="usa-footer__logo grid-row mobile-lg:grid-col-6 mobile-lg:grid-gap-2">
            <div class="mobile-lg:grid-col-auto">
              <img height="64" src="assets/img/logo-ssa.svg">
            </div>
            <div class="mobile-lg:grid-col-auto">
              <p class="usa-footer__logo-heading">
                Social Security
              </p>
            </div>
          </div>
          <div class="usa-footer__contact-links mobile-lg:grid-col-6">
            <div class="usa-footer__social-links grid-row grid-gap-1">
              <div class="grid-col-auto">
                <a class="usa-social-link usa-social-link--facebook" href="javascript:void(0);">
                  <span>Facebook</span>
                </a>
              </div>
              <div class="grid-col-auto">
                <a class="usa-social-link usa-social-link--twitter" href="javascript:void(0);">
                  <span>Twitter</span>
                </a>
              </div>
              <div class="grid-col-auto">
                <a class="usa-social-link usa-social-link--youtube" href="javascript:void(0);">
                  <span>YouTube</span>
                </a>
              </div>
              <div class="grid-col-auto">
                <a class="usa-social-link usa-social-link--instagram" href="javascript:void(0);">
                  <span>Instagram</span>
                </a>
              </div>
              <div class="grid-col-auto">
                <a class="usa-social-link usa-social-link--rss" href="javascript:void(0);">
                  <span>RSS</span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script src="./assets/js/uswds.min.js"></script>
  <script src="./pega-govus.js"></script>
  <script>
    const defaultSettings = localStorage.getItem('defaultcfg');
    let defaultCfg = {
      url: "https://pw16agenda-dt1.pegacloud.io/prweb",
      portalName: "DemoReact1",
      username: "wssuser2",
      password: "install@123",
      clientid: "43524976946816519752",
      clientsecret: "90863E0C04EF929425BBC22004949762"
    };
    if (defaultSettings != null) {
      defaultCfg = JSON.parse(defaultSettings);
    }
    showWorklist();
    function showWorklist() {
      const elem = document.querySelector("#myworkist");
      const mytag = document.createElement("pega-govus");
      mytag.action = 'workList';
      mytag.url = defaultCfg.url;
      mytag.username = defaultCfg.username;
      mytag.password = defaultCfg.password;
      mytag.authentication = 'oauth2password';
      mytag.clientid = defaultCfg.clientid;
      mytag.clientsecret = defaultCfg.clientsecret;
      mytag.portalName = defaultCfg.portalName;
      mytag.addEventListener("message", function (event) {
        const redirectURL = `${window.location.href.substring(0, window.location.href.lastIndexOf('/'))}`;
        if (event.detail.type === "openassignment") {
          let id = event.detail.id.replace("!", " ").split(" ");
          if (id.length > 3) {
            window.history.replaceState(
              {},
              '',
              `${redirectURL}/case-ssa.html?case=${id[2]}`,
            );
          }
        } else if (event.detail.type === "cancel") {
          window.location.href = `${redirectURL}/ssa.html`;
        }
      });
      elem.appendChild(mytag);
    }
    function startBenefitVerification(e) {
      const elem = document.querySelector("#main-content");
      const mytag = document.createElement("pega-govus");
      mytag.action = 'createNewWork';
      mytag.bShowCancel = 'true';
      mytag.url = defaultCfg.url;
      mytag.username = defaultCfg.username;
      mytag.password = defaultCfg.password;
      mytag.authentication = 'oauth2password';
      mytag.clientid = defaultCfg.clientid;
      mytag.clientsecret = defaultCfg.clientsecret;
      mytag.portalName = defaultCfg.portalName;
      mytag.casetype = 'OPGO8L-CarInsur-Work-BenefitVerification';
      elem.innerHTML = "";
      mytag.addEventListener("message", function (event) {
        const redirectURL = `${window.location.href.substring(0, window.location.href.lastIndexOf('/'))}`;
        if (event.detail.type === "newwork") {
          let id = event.detail.id.split(" ");
          if (id.length == 2) {
            window.history.replaceState(
              {},
              '',
              `${redirectURL}/case-ssa.html?case=${id[1]}`,
            );
          }
        } else if (event.detail.type === "cancel") {
          window.location.href = `${redirectURL}/ssa.html`;
        }
      });
      elem.appendChild(mytag);
    }
  </script>
</body>

</html>
