<!DOCTYPE html>
<html lang="en">

<head>
  <title>Pega GovUS</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, user-scalable=yes, initial-scale=1.0, viewport-fit=cover" />
  <script src="./assets/js/uswds-init.min.js"></script>
  <link rel="stylesheet" href="./assets/css/uswds.min.css" />
  <link rel="stylesheet" href="./app.css" type="text/css">
</head>

<body>
  <a class="usa-skipnav" href="#main-content">Skip to main content</a>
  <header class="usa-header usa-header--extended">
    <div class="usa-navbar">
      <div class="usa-logo" id="extended-logo">
        <em class="usa-logo__text">
          <a href="./main.html" title="HealthCare">
            HealthCare
          </a>
        </em>
      </div>
      <button class="usa-menu-btn">Menu</button>
    </div>
    <nav aria-label="Primary navigation" class="usa-nav">
      <div class="usa-nav__inner">
        <button class="usa-nav__close">
          <img src="assets/img/usa-icons/close.svg" role="img" alt="Close">
        </button>
        <ul class="usa-nav__primary usa-accordion">
          <li class="usa-nav__primary-item">


            <button class="usa-accordion__button usa-nav__link usa-current" aria-expanded="false"
              aria-controls="extended-nav-section-one">
              <span>See Topics</span>
            </button>

            <ul id="extended-nav-section-one" class="usa-nav__submenu">
              <li class="usa-nav__submenu-item">


                <a href="#"></a>

              </li>
              <li class="usa-nav__submenu-item">


                <a href="#">Enroll in health insurance
                </a>

              </li>
              <li class="usa-nav__submenu-item">


                <a href="#">Change or Cancel plan</a>

              </li>
            </ul>
          </li>
          <li class="usa-nav__primary-item">


            <button class="usa-accordion__button usa-nav__link" aria-expanded="false"
              aria-controls="extended-nav-section-two">
              <span>Help</span>
            </button>

            <ul id="extended-nav-section-two" class="usa-nav__submenu">
              <li class="usa-nav__submenu-item">


                <a href="#">Save Money</a>

              </li>
              <li class="usa-nav__submenu-item">


                <a href="#">Tax fees and exemption</a>

              </li>
              <li class="usa-nav__submenu-item">


                <a href="#">Get Login help</a>

              </li>
            </ul>
          </li>
          <li class="usa-nav__primary-item">


            <a href="javascript:void(0)" class="usa-nav__link">

              <span>Get Answers</span>

            </a>

          </li>
        </ul>
        <div class="usa-nav__secondary">
          <ul class="usa-nav__secondary-links">
            <li class="usa-nav__secondary-item">
              <a href="">Quick Start Guide</a>
            </li>
            <li class="usa-nav__secondary-item">
              <a href="worklist.html">My pending cases</a>
            </li>
          </ul>
          <section aria-label="Search component">
            <form class="usa-search usa-search--small" role="search">
              <label class="usa-sr-only" for="search-field">Search</label>
              <input class="usa-input" id="search-field" type="search" name="search" />
              <button class="usa-button" type="submit">
                <img src="assets/img/usa-icons-bg/search--white.svg" class="usa-search__submit-icon" alt="Search" />
              </button>
            </form>
          </section>

        </div>
      </div>
    </nav>
  </header>

<main id="main-content">
  <section class="usa-hero" aria-label="Introduction">
    <div class="grid-container">
      <div class="usa-hero__callout">
        <h1 class="usa-hero__heading"><span class="usa-hero__heading--alt">Health coverage tax tool
          </span>Figure out your premium tax credit
          for IRS Form 8962
        </h1>
        <p>This tool will get you the information you need to file your taxes. Choose the path based on the form
          you're filling out now.</p><a class="usa-button" onclick="startTaxCreditCase(event);">Get started</a>
      </div>
    </div>
  </section>
  <section class="grid-container usa-section">
    <div class="grid-row grid-gap">
      <div class="tablet:grid-col-4">
        <h2 class="font-heading-xl margin-top-0 tablet:margin-bottom-0">Embedding cases using Pega</h2>
      </div>
      <div class="tablet:grid-col-8 usa-prose">
        <p>This page demonstrates how you can insert the Pega Mashup component inside any pages</p>
        <p>The component provides the ability to easily create new cases, view your pending cases and the status of
          each case.</p>

      </div>
    </div>
  </section>
  <section class="usa-graphic-list usa-section usa-section--dark">
    <div class="grid-container">
      <div class="usa-media-block tablet:grid-col">
        <div class="usa-media-block__body">
          <h2 class="usa-graphic-list__heading">No iframe</h2>
          <p>The case UI is completely embedded inside the main document using a web component</p>
        </div>
      </div>
      <div class="usa-media-block tablet:grid-col">
        <div class="usa-media-block__body">
          <h2 class="usa-graphic-list__heading">Use all the USWDS out of the box</h2>
          <p>The Web component can run as a light DOM and gets all the styling from the main document</p>
        </div>
      </div>
      <div class="usa-media-block tablet:grid-col">
        <div class="usa-media-block__body">
          <h2 class="usa-graphic-list__heading">Great performance</h2>
          <p> The JS file needed to render the very small and can render any case type</p>
        </div>
      </div>

    </div>
  </section>
  <section id="test-section-id" class="usa-section">
    <div class="grid-container">
      <h2 class="font-heading-xl margin-y-0">See how to figure out your premium tax credit</h2>
      <p class="usa-intro">
        To calculate your premium tax credit, you'll need your second lowest cost Silver plan (SLCSP) premiums to fill
        out IRS Form 8962.
        Your SLCSP premium can be found on your Form 1095-A, but it may be missing or incorrect. We'll ask a few
        questions on the next screens and provide your correct SLCSP premium.
      </p>
      <a href="#" class="usa-button usa-button--big" onclick="startTaxCreditCase(event);">Start</a>
    </div>
  </section>
</main>
<footer class="usa-footer">
  <div class="usa-footer__primary-section">
    <nav class="usa-footer__nav" aria-label="Footer navigation">
      <ul class="grid-row grid-gap">
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="javascript:void(0);">
            Demo
          </a>
        </li>
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="javascript:void(0);">
            Help
          </a>
        </li>
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="javascript:void(0);">
            About
          </a>
        </li>
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="javascript:void(0);">
            Contact Us
          </a>
        </li>
        <li class="mobile-lg:grid-col-4 desktop:grid-col-auto usa-footer__primary-content">
          <a class="usa-footer__primary-link" href="javascript:void(0);">
            Offices
          </a>
        </li>
      </ul>
    </nav>
  </div>
</footer>

<script src="./assets/js/uswds.min.js"></script>
<script src="./pega-govus.js"></script>
<script>
  let defaultCfg = {
    url: "https://frontend-app.pega.net/prweb",
    portalName: "DemoReact1",
    username: "wssuser2",
    password: "install@123",
    clientid: "43524976946816519752",
    clientsecret: "90863E0C04EF929425BBC22004949762"
  };
  function startTaxCreditCase(e) {
    const elem = e.target.closest("main");
    const mytag = document.createElement("pega-govus");
    mytag.action = 'createNewWork';
    mytag.bShowCancel = 'true';
    mytag.url = defaultCfg.url;
    mytag.username = defaultCfg.username;
    mytag.password = defaultCfg.password;
    mytag.authentication = 'oauth2password';
    mytag.clientid = defaultCfg.clientid;
    mytag.clientsecret = defaultCfg.clientsecret;
    mytag.portalName = defaultCfg.portalName;
    mytag.casetype = 'OPGO8L-CarInsur-Work-TaxCredit';
    elem.innerHTML = "";
    mytag.addEventListener("message", function (event) {
      const redirectURL = `${window.location.href.substring(0, window.location.href.lastIndexOf('/'))}`;
      if (event.detail.type === "newwork") {
        let id = event.detail.id.split(" ");
        if (id.length == 2) {
          window.history.replaceState(
            {},
            '',
            `${redirectURL}/case.html?case=${id[1]}`,
          );
        }
      } else if (event.detail.type === "cancel") {
        window.location.href = `${redirectURL}/worklist.html`;
      }
    });
    elem.appendChild(mytag);
  }
</script>
</body>

</html>
